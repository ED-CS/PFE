{% extends "layout.html" %}

{% block wrapper %}
  <div class="wrapper">
    <section class="page-header">
      <!-- Circles background -->
      <img class="bg-image" src="{{url_for('static', filename='assets/img/pages/ed2.jpg')}}" style="width: 100%;">
    </section>
    <section class="section bg-secondary">
      <div class="container mt-9">
        <div class="card card-profile shadow mt--300">
          <div class="content-center text-center mt-5 px-4">

            {% if not result %} <!-- test All System -->
                
                <h1 class="title">
                    All System
                </h1>
                <div class=" container mb-5">
                    <form method="POST" action="" enctype="multipart/form-data">
                    {{ form.hidden_tag() }}
                    <!-- file input -->
                    <div class="form-group col-md-6  mt-4 mb-4 center"> <!-- system name-->
                        {{ form.audio.label(class="custom-file-label")}}
                        {{ form.audio(class="custom-file-input")}}
                    </div>

                    <div class="form-group col-md-2  mt-4 mb-4 center"> <!-- system wieght-->
                        {{ form.nb_tags.label(class="text-center")}}
                        {{ form.nb_tags(class="form-control text-center")}}
                    </div>

                    <!-- get tags button -->
                    <div class="form-group col-md-2 mt-4 center">
                        {{ form.submit(class="btn btn-outline-secondary btn-round") }}
                    </div>

                    </form>
                    <!-- loading sections -->
                    <div class="loader-wrapper">
                    <p><b>Pleas wait ...</b><br><span class="loader"><span class="loader-inner"></span></span></p>
                    </div>
                </div>          
                        
                <!-- <div class="mt-5 py-5 border-top text-center">
                    <div class="row justify-content-center">
                        <div class="col-lg-9">
                            <p>advencet test, to get more about test result consult "get detail" you most be authantificat to see more detail about tags and categories .</p>
                            <a href="{{url_for('get_detail_result')}}" class="btn btn-primary btn-round btn-lg">Get Detail</a>
                            <a href="{{url_for('quick_test_result')}}" class="btn btn-default btn-round btn-lg">try again</a>
                        </div>
                    </div>
                </div> -->               

            {% else %} <!-- result of all system-->

                <div class="brand">
                    <h1 class="title">
                    List Of Tags
                    </h1>
                    <h3 class="description">Audio File: {{ file_name }}</h3>
                    <div class="mb-4">
                    <audio controls>
                        <source src="D:/pfe dataset/test/{{ file_name }}" type="audio/wav" />
                    </audio>
                    </div>
                </div>
                <table class="table">
                    <tbody>
                    <tr>                              
                        <td class="text-center">                                                          
                        <canvas id="System 0" width="300" height="200"></canvas>
                        </td>                            
                        <td>                                                   
                        <canvas id="System 1" width="300" height="200"></canvas>
                        </td>
                    </tr>
                    <tr>
                        <td>                                                                                 
                        <canvas id="System 2" width="300" height="200"></canvas>
                        </td>
                        <td>                                                    
                        <canvas id="System 3" width="300" height="200"></canvas>                  
                        </td>
                    </tr>
                    <tr>
                        <td >                                                                                  
                        <canvas id="System 4" width="300" height="200"></canvas>                       
                        </td>
                    </tr>
                    </tbody>
                </table>              

            {% endif%}         
          </div>
        </div>
      </div>
    </section>
    
    <footer class="footer">
      <!-- end tow main pages -->
      <!-- contact section -->
      <div class="container">
          <div class="row row-grid align-items-center my-md">
              <div class="col-lg-6">
                  <h3 class="text-primary font-weight-light mb-2">Thank you .....</h3>
                  </div>
                      <div class="col-lg-6 text-lg-center btn-wrapper">
                      <button target="_blank" href="https://twitter.com/creativetim" rel="nofollow" class="btn btn-icon-only btn-twitter rounded-circle" data-toggle="tooltip" data-original-title="Follow us">
                          <span class="btn-inner--icon"><i class="fa fa-twitter"></i></span>
                      </button>
                      <button target="_blank" href="https://www.facebook.com/CreativeTim/" rel="nofollow" class="btn-icon-only rounded-circle btn btn-facebook" data-toggle="tooltip" data-original-title="Like us">
                          <span class="btn-inner--icon"><i class="fab fa-facebook"></i></span>
                      </button>
                      <button target="_blank" href="https://instagrame.com/creativetim" rel="nofollow" class="btn btn-icon-only btn-instagram rounded-circle" data-toggle="tooltip" data-original-title="Follow us">
                          <span class="btn-inner--icon"><i class="fa fa-instagram"></i></span>
                      </button>
                      <button target="_blank" href="https://github.com/creativetimofficial" rel="nofollow" class="btn btn-icon-only btn-github rounded-circle" data-toggle="tooltip" data-original-title="Star on Github">
                          <span class="btn-inner--icon"><i class="fa fa-github"></i></span>
                      </button>
                  </div>
              </div>
          <hr>
          <div class="row align-items-center justify-content-md-between">
              <div class="col-md-6">
                  <div class="copyright">
                      &copy; 2021 <a href="" target="_blank">Creative Tim</a>.
                  </div>
              </div>
              <div class="col-md-6">
                  <ul class="nav nav-footer justify-content-end">
                      <li class="nav-item">
                      <a href="" class="nav-link" target="_blank">About Us</a>
                      </li>
                      <li class="nav-item">
                      <a href="" class="nav-link" target="_blank">Blog</a>
                      </li>
                      <li class="nav-item">
                      <a href="" class="nav-link" target="_blank">License</a>
                      </li>
                  </ul>
              </div>
          </div>
      </div>
      <!-- end contact section -->
    </footer>
  </div> 
    <script>
        {% for sys in range( systems|length ) %}
            var mychart = document.getElementById("System {{sys | safe}}").getContext('2d');
            //test chart d
            var ch = new Chart(mychart, {
                type: "pie",
                data: {
                labels: {{tags[sys] | safe}}, //labels
                datasets: [{
                    backgroundColor: {{clos[sys] | safe}}, //color
                    data: {{ val_tags[sys] | safe}}// data
                }]
                },
                options: {
                title: {
                    display: true,
                    text: "System {{ sys }}" //titel
                }
                }
            });
        {% endfor%}  
    </script>
{% endblock wrapper %}